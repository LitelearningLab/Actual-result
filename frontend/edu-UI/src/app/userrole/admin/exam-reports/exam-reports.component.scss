.exam-reports { padding: 0.5rem; }
.selections {
  display: flex;
  gap: 1rem;
  width: 50%; 
}
 :host {
  // /* Theme tokens for exam reports */
  // --bg-1: #ffffff;
  // --bg-2: #f4f6fb;
  // --theme-2-bg-1: #f6f8ff;
  // --theme-3: #fbfbfd;
  // --theme-3-border: rgba(0,0,0,0.04);

  // --button-1: #0b66d0;
  // --button-text-1: #ffffff;
  // --button-1-hover: #0954a8;
  // --button-text-2: #ffffff;
  // --icon-2: rgba(0,0,0,0.54);

  // --primary-color: #0b66d0;
  // --accent-color: #0b66d0;

  /* Review comment column tokens */
  --green-bg : #e8f9ef;
  --red-bg : #fff2f4;
  --yellow-bg : #fff8e6;
  --orange-bg : #fff4e1;
  --blue-bg : #e6f0ff;
  --green-text : #166534;
  --red-text : #b91c1c;
  --yellow-text : #b45309; 
  --orange-text : #c2410c;
  --blue-text : #0b66d0;
  --bgreen-border : #86efac;
  --bred-border : #e7d6d6; 
  --byellow-border : #fde68a;
  --borange-border : #faeedf;
  --bblue-border : #93c5fd;
  --score-color: #f39c12;
}


.selections mat-form-field {
  flex: 1 1 0;   // equal width
  width: 100%;
  background-color: var(--bg-1);
}
:host ::ng-deep .mat-mdc-form-field-subscript-wrapper {
  display: none;
}
.tab-actions{ padding:0.5rem; display:flex; justify-content:space-between; align-items:center; gap:0.75rem;  } 
.tab-actions .search{ background-color: var(--theme-2-bg-1); }
.tab-actions .search { flex: 1 1 26.25rem; min-width: 13.75rem;  max-width: 28.125rem; }
.tab-actions .search .search-field { width: 100%; }
.tab-actions .search .mat-form-field-wrapper { padding: 0 0.375rem; }
.tab-actions .search mat-icon[matPrefix] { color: var(--icon-2); margin-right:0.5rem; }
/* Richer toolbar & buttons */
.tab-actions .controls{ display:flex; align-items:center; gap:12px }
.tab-actions .action-row{ display:flex; gap:8px; align-items:center }
.tab-actions .controls button { background: var(--button-1) !important; color: var(--button-text-1) !important; }
.tab-actions .controls button:hover { background: var(--button-1-hover) !important; color: var(--button-text-2) !important; }

.wrong-summary-link{ margin-left:0.625rem; font-size:0.9em; color:var(--primary-color); cursor:pointer; text-decoration:underline; font-weight:600 }

/* Fullscreen semi-transparent backdrop to focus attention */
.wrong-summary-backdrop{ position: fixed; inset: 0; background: linear-gradient(180deg, rgba(0,0,0,0.48), rgba(0,0,0,0.38)); z-index: 1498; display:flex; align-items:center; justify-content:center; padding:1.25rem; backdrop-filter: blur(3px); }

.wrong-summary-panel, .resource-panel{ position: relative; min-width: 60%;  max-width: 70%; max-height: 90vh; z-index: 1499; display:flex; flex-direction:column; transform-origin: center; animation: popIn 180ms ease-out; }
.wrong-summary-panel .card, .resource-panel .card{ background: linear-gradient(180deg, var(--bg-2) 0%, #ffffff 100%); border: 1px solid rgba(0,0,0,0.06); border-radius: 0.75rem; box-shadow: 0 1.25rem 2.5rem rgba(5,18,40,0.28); overflow: hidden; }
.panel-header{ display:flex; align-items:center; justify-content:space-between; gap:12px; padding: 1rem 1.25rem; border-bottom: 1px solid rgba(0,0,0,0.04); background: transparent }
.panel-header h4{ margin:0; font-size:1.05rem; letter-spacing:0.2px; font-weight:700 }
.panel-header .panel-sub{ font-size:0.9rem; color: rgba(0,0,0,0.6); margin-top:4px }
.wrong-summary-panel .panel-body{ padding: 1.25rem 1.5rem; background-color: transparent; }
.user-review-panel .panel-body { overflow:auto; max-height: calc(90vh - 160px); padding: 2rem; }
.wrong-summary-panel .question-title{ font-weight:700; margin-bottom:12px; font-size:1rem }
.wrong-summary-panel .summary-table{ width:100%; border-collapse:separate; border-spacing:0 10px; table-layout: fixed; }
.wrong-summary-panel .summary-table thead th{ text-align:left; padding:8px 12px; font-weight:700; font-size:0.92rem; color: var(--table-header-text) ; background: var(--table-header-bg) }
/* give each cell an elevated card feel within the spaced rows */
.wrong-summary-panel .summary-table tbody tr{ background: transparent }
.wrong-summary-panel .summary-table tbody td{ padding:0.75rem 0.875rem; vertical-align:middle; background: #ffffff; border-radius:0.5rem; box-shadow: 0 0.375rem 1.125rem rgba(12,30,60,0.06); }
.wrong-summary-panel .summary-table tbody td + td{ margin-left:0.5rem }
.wrong-summary-panel .summary-table td:first-child{ font-weight:700; color: rgba(0,0,0,0.85); }
.wrong-summary-panel .summary-table td:last-child{ text-align:right }

/* remove any thin borders to keep the card look */
.wrong-summary-panel .summary-table td{ border: none }

/* Responsive: convert rows into stacked cards on narrow screens */
@media (max-width: 720px){
  .wrong-summary-panel .summary-table, .wrong-summary-panel .summary-table thead, .wrong-summary-panel .summary-table tbody, .wrong-summary-panel .summary-table tr, .wrong-summary-panel .summary-table th, .wrong-summary-panel .summary-table td{ display:block; width:100% }
  .wrong-summary-panel .summary-table thead { display:none }
  .wrong-summary-panel .summary-table tbody tr{ margin-bottom:12px }
  .wrong-summary-panel .summary-table tbody td{ display:flex; justify-content:space-between; align-items:center }
  .wrong-summary-panel .summary-table tbody td::before{ content: attr(data-label); font-weight:700; color: rgba(0,0,0,0.65); margin-right:8px }
}
.wrong-summary-panel .summary-actions{ display:flex; justify-content:flex-end; gap:8px; padding: 12px;
    border-top: 2px solid var(--border-1); }
.wrong-summary-panel .small-muted{ color: rgba(0,0,0,0.55); font-size:0.85rem; padding-left: 1rem; }
.wa-count-link{ color:var(--accent-color); text-decoration:underline; cursor:pointer; font-weight:700 }
.muted{ color: rgba(0,0,0,0.55); font-size:0.95em }

/* Resources panel uses same backdrop/panel but unique inner body */
.resource-panel .panel-body{ padding: 1rem 1.25rem; display:flex; flex-direction:column; gap:12px; }
.resource-list{ list-style:none; padding:0; margin:0; display:flex; flex-direction:column; gap:10px }
.resource-list li{ padding:0.75rem; background: linear-gradient(180deg, rgba(240,246,255,0.6), rgba(255,255,255,0.6)); border-radius:0.625rem; display:flex; justify-content:space-between; align-items:center; gap:0.75rem; border:1px solid rgba(11,102,208,0.06) }
.res-title{ font-weight:700; color: rgba(2,32,76,0.9) }
.res-desc{ font-size:0.92rem; color: rgba(0,0,0,0.6) }
.res-actions a{ background: var(--button-1); color: var(--button-text-1); padding:0.5rem 0.75rem; border-radius:0.5rem; text-decoration:none }
.res-actions a:hover{ opacity:0.95 }

/* subtle pop & fade animation */
@keyframes popIn { from { transform: scale(0.96) translateY(6px); opacity: 0 } to { transform: scale(1) translateY(0); opacity: 1 } }

/* scrollbar for long lists */
.wrong-summary-panel .panel-body, .resource-panel .panel-body, .user-review-panel .panel-body{ overflow:auto }
.wrong-summary-panel .panel-body::-webkit-scrollbar, .resource-panel .panel-body::-webkit-scrollbar, .user-review-panel .panel-body::-webkit-scrollbar{ height:8px; width:10px }
.wrong-summary-panel .panel-body::-webkit-scrollbar-thumb, .resource-panel .panel-body::-webkit-scrollbar-thumb, .user-review-panel .panel-body::-webkit-scrollbar-thumb{ background: rgba(0,0,0,0.12); border-radius:6px }

/* mobile & small screens */
@media (max-width: 880px){
  .wrong-summary-backdrop{ padding:12px }
  .wrong-summary-panel, .resource-panel{ width: 100%; max-width: 100%; }
  .wrong-summary-panel .card, .resource-panel .card{ border-radius: 10px }
  .wrong-summary-panel .panel-body{ padding: 12px }
  .wrong-summary-panel .summary-table thead th{ font-size:0.84rem }
}

/* Responsive tweaks */
@media (max-width: 640px){
  .wrong-summary-panel{ width: 96%; }
  .wrong-summary-panel .card{ padding: 12px }
  .wrong-summary-panel .summary-table thead th{ font-size:0.85rem }
}
// student-name
.student-name { color: var(--button-1); cursor: pointer;  font-weight: 600; }

.resource-list{ list-style:none; padding:0; margin:0; display:flex; flex-direction:column; gap:10px }
.resource-list li{ padding:10px; background: rgba(0,0,0,0.02); border-radius:8px; display:flex; justify-content:space-between; align-items:center }
.res-title{ font-weight:700 }
.res-desc{ font-size:0.9rem }
.res-actions a{ background: var(--button-1); color: var(--button-text-1); padding:6px 10px; border-radius:6px; text-decoration:none }
.res-actions a:hover{ opacity:0.95 }

/* User Review Panel Styles (matches provided screenshot) */
.user-review-panel { width: min(65%, 96%); max-height: 90vh; }
.user-review-panel .card { display:flex; flex-direction:column; border-radius: 0.7rem; background: linear-gradient(180deg,#ffffff 0%, #fbfbfd 100%); box-shadow: 0 16px 36px rgba(10,20,40,0.12); border: 1px solid rgba(0,0,0,0.06); }
.user-review-panel .panel-header { display:flex; align-items:center; justify-content:space-between; gap:.8rem;  padding: 1rem 1.2rem; border-bottom: 1px solid rgba(0,0,0,0.04); background-color: var(--theme-2) ; }
.user-review-panel .panel-header .header-info { display:flex; flex-direction:column; gap:4px; }
.user-review-panel .panel-header .header-icon { width:3rem; height:3rem; display:flex; align-items:center; justify-content:center; border-radius: 50%; background: linear-gradient(180deg, rgba(11,102,208,0.12), rgba(31,123,255,0.06)); }
.user-review-panel .panel-header h4 { margin:0; font-size:1.2rem; font-weight:700 }
.user-review-panel .panel-header h3 { margin:0; font-size:0.95rem; font-weight:500; color: rgba(0, 0, 0, 0.6) }
.user-review-panel .panel-header .score { color: rgba(0,0,0,0.6); font-weight:500 }
.user-review-panel .panel-header .result { font-weight:700; padding:0.15rem 0.45rem; border-radius: 999px; }
.user-review-panel .panel-header .result.pass { color: var(--green-text); }
.user-review-panel .panel-header .result.fail { color:  var(--red-text); }
.user-review-panel .panel-header button[mat-icon-button] { width:36px; height:36px; border-radius:8px }
.user-review-panel .panel-sub { color: rgba(0,0,0,0.55); font-size:1.2rem }

.attempt-header { display:flex; flex-direction:column; gap:0.375rem; padding:0.625rem 0; border-bottom: 1px solid rgba(0,0,0,0.04); margin-bottom:0.75rem }
.attempt-header h5 { margin:0; font-size:1rem; display:flex; align-items:center; gap:0.75rem }
.attempt-header .score-badge { background: #e9f7ef; color: #0a8043; padding:0.375rem 0.625rem; border-radius:0.75rem; font-weight:700; font-size:0.95rem; margin-left:auto }
.attempt-meta { display:flex; gap:0.75rem; color: rgba(0,0,0,0.55); font-size:0.9rem }

.questions-list { display:flex; flex-direction:column; gap:14px; margin-top:10px }
.question-review-card { border: 1px solid var(--border-dark-1); border-radius:10px;  padding: 1rem 2rem 1rem 2rem; background: var(--theme-3); }
.question-review-card .q-text { font-weight:300 }

.q-head-row { display:flex; justify-content:space-between; align-items:flex-start; gap:.7rem; margin-bottom: 1rem }
.q-left { display:flex; gap:.7rem; align-items:flex-start }
.q-body { display: grid; gap: 0.5rem; }
.q-meta { display:flex; gap:10px; align-items:center; }
.q-index { width:2rem; height:2rem; background: #d7d8da91; border-radius:50%; display:flex; align-items:center; justify-content:center;  }
.q-right { display:flex; gap:10px; align-items:center }
.q-badge { background: var(--theme-3); border: 1px solid var(--border-dark-1); ;border-radius: .575rem; padding-top: .125rem;
    padding-bottom: .125rem; font-size: .75rem;    line-height: 1rem;   padding-left: .925rem;    padding-right: .925rem; width: fit-content;}
.q-info { color: var(--button-1); font-size:0.95rem; display: contents;}
.q-marks.small-muted { color: rgba(0,0,0,0.6); font-size:0.95rem }

.q-options { display:flex; flex-wrap:wrap; gap:10px; }
.q-option { display:flex; align-items:flex-start; gap:0.75rem; padding:0.75rem; border-radius:0.5rem; border:1px solid rgba(0,0,0,0.12); background:#f8fbff; }
.opt-left { width:2.75rem; display:flex; align-items:center; justify-content:center }
.opt-left .opt-mark { width:2.125rem; height:2.125rem; border-radius:50%; background:rgba(0,0,0,0.04); display:inline-flex; align-items:center; justify-content:center; font-weight:700 }
.opt-body { flex:1 }
// .opt-text { font-weight:600 }
.opt-badge { display:flex; align-items:center; gap:6px }
.badge { padding:6px 8px; border-radius:8px; font-size:0.82rem; }
.badge.your-answer { background: var(--red-bg) ; color:var(--red-text); border: 1px solid var(--bred-border); }
.badge.correct { background:#e8f9ef; color:var(--green-text); border: 1px solid var(--bgreen-border); }
.badge.missed { background: var(--blue-bg) ; color:var(--bblue-text); border: 1px solid var(--bblue-border); }
.q-option.selected { background: var(--red-bg) ; color: var(--red-text); border-color: var(--bred-border); }
.q-option.correct { background: var(--green-bg) ; color: var(--green-text); border-color: var(--bgreen-border); }
.q-option.missed { background: var(--blue-bg) ; color: var(--bblue-text); border-color: var(--bblue-border); }

.q-selected, .q-marks { margin-top:8px; font-size:0.95rem }
.q-feedback { margin-top:8px; background: rgba(240,248,255,0.6); padding:8px 10px; border-radius:8px; color: rgba(0,0,0,0.75) }

/* small badges for marks */
.question-review-card .mark-badge { float:right; background: #fff3f3; color: var(--red-text); padding:6px 8px; border-radius:8px;  }

@media (max-width: 880px) {
  .q-options.two-col { grid-template-columns: 1fr; }
  .user-review-panel { width: 96%; }
}

.q-options.two-col { display:grid; grid-template-columns: 1fr 1fr; gap:12px; }

/* Marks badge states */
.q-marks.mark-positive { background:#e8f9ef; color:#0b8a45; padding:6px 10px; border-radius:10px; font-weight:700 }
.q-marks.mark-negative { background:#fff2f4; color:#b02a37; padding:6px 10px; border-radius:10px; font-weight:700 }
.q-marks.mark-mid { background:#fff8e6; color:#b36a00; padding:6px 10px; border-radius:10px; font-weight:700 }

/* Tighter gaps and full-width option bodies */
.q-option { padding:14px; }
.opt-body { padding-right:12px ;     align-self: center;}
.opt-badge { margin-left:auto; display:flex; align-items:center }

/* Fill question layout */
.q-fill .fill-row { display:flex; gap:12px; align-items:center }
.q-fill .fill-option { padding:10px 14px; border-radius:8px; background:#fff7ed; border:1px solid rgba(245,166,35,0.08); }
.q-fill .fill-option.selected { background:#e8f6ff; border-color: rgba(2,112,255,0.12) }
.q-fill .fill-option.correct { background: var(--green-bg); border-color: var(--bgreen-border) }
.q-fill .fill-correct {padding:10px 14px; border-radius:8px;  color: rgba(0,0,0,0.6); font-size:0.9rem ; background-color: var(--green-bg);  border: 1px solid var(--bgreen-border) ; }

/* Descriptive review layout (model answer, student answer, score, feedback, comment columns) */
.q-descriptive {     display: grid;gap: 1rem;  }
.q-descriptive .desc-header { display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:10px; 
padding: .7rem; background-color: var(--blue-bg); border-radius: .7rem; border: 1px solid var(--bblue-border) ; }
.q-descriptive .desc-header .desc-question { flex:1 1 auto }
.q-descriptive .desc-header .question-label { font-size:0.82rem; text-transform:uppercase; color:#8c6ad6; background: rgba(140,106,214,0.08); display:inline-block; padding:6px 8px; border-radius:8px; font-weight:700; margin-bottom:6px }
.q-descriptive .desc-header .question-value { font-weight:700; color: rgba(0,0,0,0.85); }
.q-descriptive .desc-header .desc-score { width:140px; flex:0 0 140px; display:flex; flex-direction:column; align-items:center; }
.q-descriptive .desc-header .score-label{ font-size:0.85rem; color: rgba(0,0,0,0.55); }
.q-descriptive .desc-header .score-value{ font-size:1.25rem; font-weight:800; color:#f39c12; background:#fff; padding:12px 8px; border-radius:10px; border:1px solid rgba(0,0,0,0.04); margin-top:6px }
.q-descriptive .desc-model {padding: .7rem; background-color: var(--theme-2); border-radius: .7rem; border: 1px solid var(--bblue-border) ;}
.q-descriptive .desc-student {padding: .7rem; background-color: var(--green-bg); border-radius: .7rem; border: 1px solid var(--bgreen-border) ;}
// .q-descriptive .desc-model, .q-descriptive .desc-student { flex: 1 1 0; background: #f7fbff; padding:10px; border-radius:8px; }
.q-descriptive .desc-model .model-label, .q-descriptive .desc-student .student-label { font-weight:700; color: rgba(0,0,0,0.7); margin-bottom:6px }
.q-descriptive .desc-model .model-text, .q-descriptive .desc-student .answer-text { color: rgba(0,0,0,0.85); line-height:1.45; }
.q-descriptive .desc-score { width:140px; background:#ffffff; border:1px solid rgba(0,0,0,0.04); padding:10px; border-radius:8px; display:flex; flex-direction:column; align-items:center; justify-content:center }
.q-descriptive .score-label{ font-weight:700; color: rgba(0,0,0,0.6); margin-bottom:6px }
.q-descriptive .score-value{ font-size:1.05rem; font-weight:800; color:#0b66d0 }
.q-descriptive .q-feedback { padding: .7rem; background-color: var(--blue-bg); border-radius: .7rem; border: 1px solid var(--bblue-border) ;}

.q-review-comments { margin-top:10px }
.review-columns { display:grid; grid-template-columns: 1fr 1fr 1fr; gap:12px }
.review-columns .col { background: #fff; border:1px solid rgba(0,0,0,0.04); padding:10px; border-radius:8px; min-height:60px }
.review-columns .col.missed { background-color: var(--red-bg); border-color: var(--bred-border); }
.review-columns .col.incorrect { background-color: var(--orange-bg); border-color: var(--borange-border); }
.review-columns .col.incomplete { background-color: var(--yellow-bg); border-color: var(--byellow-border); }

/* New review column header and item layout */
.col-header { display:flex; align-items:center; gap:8px; margin-bottom:8px;     align-items: baseline; }
.col-header h4 { margin:0; font-size:1rem; letter-spacing:0.3px }
.dot { width:12px; height:12px; border-radius:50%; display:inline-block }
.dot.red { background: var(--red-text) }
.dot.orange { background: var(--orange-text) }
.dot.yellow { background: var(--yellow-text) }
.review-item { display:flex; gap:10px; align-items:flex-start }
.ri-left { width:2.25rem; display:flex; align-items:flex-start; justify-content:flex-start }
.ri-icon { width:1.75rem; height:1.75rem; display:inline-flex; align-items:center; justify-content:center; border-radius:0.375rem; font-size:0.875rem }
.ri-icon.missed { color: var(--red-text);  }
.ri-icon.incorrect { color: var(--orange-text);  }
.ri-icon.incomplete {  color: var(--yellow-text); }
.ri-body { flex:1 }
.review-text.deleted { color: rgba(0,0,0,0.35); text-decoration: line-through }
.deleted-by { color: #c0392b; font-style:italic; display:block; margin-top:6px }
/* Review actions: right-aligned, spaced, with compact button look */
.review-actions { display:flex; gap:0.5rem;  margin-top:0.8rem ;padding-left: 1rem; }
.review-actions mat-icon { font-size: initial !important; }
.review-actions .edit-link, .review-actions .delete-link { padding:0.375rem 0.625rem; border-radius:0.5rem;  text-decoration:none }
// .review-actions .edit-link { color:#0b66d0; background: rgba(11,102,208,0.06); border: 1px solid rgba(11,102,208,0.08) }
.review-actions .delete-link { color:#d33;  }
.review-actions .edit-link:hover, .review-actions .delete-link:hover { opacity:0.95 }

@media (max-width:880px){
  .review-columns { grid-template-columns: 1fr }
}

.review-columns .col h4 { margin:0 0 8px 0; font-size:0.98rem }
// .review-item {  border-radius:6px; padding:8px; margin-bottom:8px; border:1px solid rgba(0,0,0,0.03) }
.review-text-missed { display: flex; background:  var(--theme-3) ;  font-weight:400 ; padding: .7rem ; border: .1rem solid var(--bred-border) ; border-radius:.7rem ;}
.review-text-incorrect { display: flex; background:  var(--theme-3) ;font-weight:400 ; padding: .7rem ; border: .1rem solid var(--borange-border) ; border-radius:.7rem ;}
.review-text-incomplete { display: flex; background:  var(--theme-3) ;  font-weight:400 ; padding: .7rem ; border: .1rem solid var(--byellow-border) ; border-radius:.7rem ;}
.review-meta { font-size:0.4rem; color: rgba(0,0,0,0.55); margin-top:6px }
// .review-actions { margin-top:6px }
.review-actions .edit-link, .review-actions .delete-link {  margin-right:8px; cursor:pointer;     display: flex; }

@media (max-width: 880px) {
  .q-descriptive .desc-row { flex-direction:column }
  .review-columns { grid-template-columns: 1fr }
  .q-descriptive .desc-score { width:100%; }
  .q-descriptive .desc-header { flex-direction:column; align-items:flex-start }
  .q-descriptive .desc-header .desc-score { width:100%; flex: none; margin-top:8px }
}