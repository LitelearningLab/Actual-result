.page{padding:0.5rem}

:host ::ng-deep .mat-mdc-form-field-subscript-wrapper {
	display: none;
}
:host {

  /* Review comment column tokens */
  --green-bg : #e8f9ef;
  --red-bg : #fff2f4;
  --yellow-bg : #fff8e6;
  --orange-bg : #fff4e1;
  --blue-bg : #e6f0ff;
  --green-text : #166534;
  --red-text : #b91c1c;
  --yellow-text : #b45309; 
  --orange-text : #c2410c;
  --blue-text : #0b66d0;
  --bgreen-border : #86efac;
  --bred-border : #e7d6d6; 
  --byellow-border : #fde68a;
  --borange-border : #faeedf;
  --bblue-border : #93c5fd;
  --score-color: #f39c12;
}
.exam-actions button {background: var(--button-1) !important; color: var(--button-text-1) !important;}
.exam-actions button:hover {background: var(--button-1-hover) !important; color: var(--button-text-1) !important;}

/* hide cards on desktop, show on mobile */
.exam-cards { display: none; }

@media (max-width: 960px) {
  .list-wrapper { display: none; } /* hide table on small screens */
  .exam-cards { display: block; }

  .exam-card {
    border-radius: 0.5rem;
    background: #fff;
    margin-bottom: 0.75rem;
    padding: 0.75rem;
    box-shadow: 0 1px 3px rgba(0,0,0,.06);
    display: flex;
    flex-direction: column;
  }
  .exam-card .meta {
    display:flex;
    justify-content:space-between;
    gap:0.5rem;
    margin-bottom:0.5rem;
  }
  .exam-card .actions { display:flex; justify-content:flex-end; }
  .exam-card button { min-width: 5.25rem; height: 2.5rem; }
}

  /* Tab styling to match table header */
  :host ::ng-deep .exam-tabs .mat-mdc-tab-header {
    background: #f5f7fa; /* match table header bg */
    border-radius: 8px 8px 0 0;
    border-bottom: 1px solid #e0e4ea;
  }
  :host ::ng-deep .exam-tabs .mat-mdc-tab-labels {
    min-height: 3rem;
  }
  :host ::ng-deep .exam-tabs .mat-mdc-tab-label {
    color: #4a555f;
    font-weight: 600;
    font-size: var(--font-size-base);
    padding: 0 1.5rem;
    min-height: 3rem;
    // background: transparent;
    border-radius: 8px 8px 0 0;
    margin-right: 2px;
    transition: background 0.2s;
  }
  :host ::ng-deep .exam-tabs .mat-mdc-tab-label.mat-mdc-tab-label-active {
    background-color: var(--table-header-bg);
    color: #1e88e5;
    box-shadow: 0 2px 8px rgba(30,136,229,0.04);
    border-bottom: 2px solid #1e88e5;
    z-index: 2;
  }
  :host ::ng-deep .exam-tabs .mat-mdc-tab-label:not(.mat-mdc-tab-label-active):hover {
    background-color: var(--table-header-bg);
  }

  /* Review Modal */
  @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
  @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

  .review-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,0.6); backdrop-filter: blur(4px); 
    display: flex; align-items: center; justify-content: center; z-index: 1400; padding: 20px; animation: fadeIn 0.2s; }
  
  .review-panel { width: min(1200px, 98%); max-height: 90vh; overflow: hidden; display: flex; flex-direction: column;
    background: #fff; border-radius: 16px; box-shadow: 0 24px 60px rgba(0,0,0,0.2); animation: slideUp 0.3s; }
  
  .review-header { display: flex; justify-content: space-between; align-items: center; padding: 1.5rem 1.75rem;
    border-bottom: 1px solid #e5e7eb; background: linear-gradient(to bottom, #fff, #f9fafb);
    h3 { margin: 0; font-size: var(--h2-size); font-weight: 700; color: #111827; display: flex; align-items: center; gap: 0.625rem;
      &:before { content: 'ðŸ“Š'; font-size: calc(var(--h2-size) * 1.1); } }
    button { background: #f3f4f6; border-radius: 0.5rem; transition: all 0.2s;
      &:hover { background: #e5e7eb; transform: scale(1.05); } } }
  
  .review-list { overflow-y: auto; padding: 1.25rem 1.25rem 5rem; max-height: calc(90vh - 6.25rem);
    &::-webkit-scrollbar { width: 0.625rem; }
    &::-webkit-scrollbar-track { background: #f1f5f9; border-radius: 0.3125rem; margin: 0.25rem 0; }
    &::-webkit-scrollbar-thumb { background: linear-gradient(to bottom, #cbd5e1, #94a3b8); border-radius: 0.3125rem; border: 2px solid #f1f5f9;
      &:hover { background: linear-gradient(to bottom, #94a3b8, #64748b); } } }
  
  .attempt-meta { display: flex; flex-direction: column; gap: 1rem; margin-bottom: 1rem; padding: 1rem;
    background: linear-gradient(135deg, #fff 0%, #f8fafc 100%); border-radius: 0.75rem; border: 1px solid #e2e8f0; box-shadow: 0 2px 8px rgba(0,0,0,0.04); }
  
  .meta-row { display: flex; gap: 1.25rem; flex-wrap: wrap;
    &.primary-row { padding-bottom: 1rem; border-bottom: 2px solid #e2e8f0;
      .meta-item { flex: 1; min-width: 9.375rem; padding: 1rem 1.25rem; background: linear-gradient(135deg, #f8fafc, #f1f5f9);
        border-radius: 0.625rem; border: 1px solid #e2e8f0; text-align: center; transition: all 0.2s;
        &:hover { transform: translateY(-0.125rem); box-shadow: 0 4px 12px rgba(0,0,0,0.08); }
        strong { display: block; font-size: var(--font-size-sm); text-transform: uppercase; letter-spacing: 0.8px; color: #64748b; font-weight: 700; margin-bottom: 0.5rem; }
        .value { display: block; font-size: var(--font-size-lg); font-weight: 700; color: #1e293b; } }
      .score-item .value { color: #3b82f6; } }
    &.secondary-row .meta-item { flex: 1; min-width: 11.25rem; display: flex; flex-direction: column; gap: 0.375rem;
      strong { font-size: var(--font-size-sm); text-transform: uppercase; letter-spacing: 0.5px; color: #64748b; font-weight: 600; }
      .value { font-size: var(--font-size-base); font-weight: 600; color: #1e293b; } } }
  
  .status-badge { padding: 0.375rem 1rem !important; border-radius: 1.25rem !important; font-size: var(--font-size-sm) !important; 
    font-weight: 700 !important; letter-spacing: 0.5px; text-transform: uppercase;
    &.status-pass { background: #d1fae5; color: #065f46; border: 1px solid #a7f3d0; }
    &.status-fail { background: #fee2e2; color: #991b1b; border: 1px solid #fecaca; }
    &.status-correct { background: #d1fae5; color: #065f46; border: 1px solid #a7f3d0; }
    &.status-incorrect { background: #fee2e2; color: #991b1b; border: 1px solid #fecaca; } }
  
  .result-badge { padding: 0.375rem 1rem !important; border-radius: 1.25rem !important; font-size: var(--font-size-sm) !important;
    font-weight: 700 !important; letter-spacing: 0.5px; text-transform: uppercase;
    &.result-pass { background: linear-gradient(135deg, #10b981, #059669); color: white !important; box-shadow: 0 2px 8px rgba(16,185,129,0.3); }
    &.result-fail { background: linear-gradient(135deg, #ef4444, #dc2626); color: white; box-shadow: 0 2px 8px rgba(239,68,68,0.3); } }
  
  /* Present review table rows as stacked review cards (card-like rows) */
  .review-table { width: 100%; border-collapse: separate; border-spacing: 0; margin: 0.5rem 0 2rem; }

  .review-table thead { display: none; }

  .review-table tbody { display: flex; flex-direction: column; gap: 12px; }

  .review-table tbody tr {
    display: block; /* make the row behave like a block card */
    background: var(--theme-3, #fbfbfd);
    border: 1px solid rgba(0,0,0,0.06);
    border-radius: 10px;
    padding: 1rem 1.25rem;
    box-shadow: 0 6px 16px rgba(16,32,48,0.04);
    transition: transform 0.12s ease, box-shadow 0.12s ease;
  }

  .review-table tbody tr:hover { transform: translateY(-4px); box-shadow: 0 12px 32px rgba(16,32,48,0.06); }

  .review-table tbody tr td { display: block; padding: 0; border: none; }

  .review-table .question-cell { padding: 0; }

  /* keep marks and status aligned right like the admin layout */
  .review-table .marks-cell, .review-table .status-cell { text-align: right; padding-left: 12px; }

  @media (max-width: 720px) {
    .review-table tbody { gap: 10px; }
  }

  /* Options list styling inside review rows */
  .options-list { list-style: none; padding: 0.5rem 0 0 0; margin: 0; display: grid; grid-template-columns: 1fr; gap: 0.5rem; 
  // option show two columns if more than 2 options
     display:grid; grid-template-columns: 1fr 1fr; gap:12px;  }
     
  .options-list li { display: flex; align-items: center; justify-content: space-between; gap: 0.75rem; padding: 0.625rem 0.75rem; border-radius: 0.5rem; background: #fff; border: 1px solid #eef2f7; transition: all 0.12s; }
  .options-list li .opt-text { flex: 1; color: #0f172a; font-weight: 500; }
  .options-list li .opt-indicator mat-icon { color: #60a5fa; }

  .option-correct { box-shadow: 0 1px 0 rgba(16,185,129,0.06); border-color: #dcfce7; }
  .option-selected { background: linear-gradient(90deg,#f8fafc,#f1f5f9); border-color: #c7e7ff; }
  .option-selected-correct { background: linear-gradient(90deg,#ecfdf5,#d1fae5); border-color: #a7f3d0; }
  .option-selected-incorrect { background: linear-gradient(90deg,#fff7f7,#fff1f1); border-color: #fecaca; }
  .option-selected-correct .opt-indicator mat-icon { color: #059669; }
  .option-selected-incorrect .opt-indicator mat-icon { color: #b91c1c; }
  .option-correct { box-shadow: 0 1px 0 rgba(16,185,129,0.06); border-color: #dcfce7; }
  .option-correct { background: linear-gradient(90deg,#ecfdf5,#d1fae5); border-color: #a7f3d0; }
  .correct-indicator mat-icon { color: #065f46; margin-left: 8px; }
  .not-answered { margin: 8px 0; display: inline-block; padding: 6px 10px; background: #fff7ed; border: 1px solid #ffe6cc; color: #92400e; border-radius: 6px; font-weight: 700; }

  .fill-answer { margin-top: 0.5rem; display: flex; flex-direction: column; gap: 0.5rem; }
  .fill-row { display: flex; gap: 0.75rem; align-items: center; }
  .fill-label { min-width: 5.625rem; font-weight: 600; color: #475569; }
  .fill-value { padding: 0.5rem 0.75rem; border-radius: 0.5rem; background: #fff; border: 1px solid #e6eef7; font-weight: 600; }
  .fill-correct { background: #ecfdf5; border-color: #bbf7d0; color: #065f46; }
  .fill-incorrect { background: #fff1f2; border-color: #fecaca; color: #991b1b; }
  .fill-value.expected { background: linear-gradient(90deg,#f8fafc,#f1f5f9); border-color: #e2e8f0; font-weight: 700; }
  .feedback { margin-top: 6px; color: #7f1d1d; font-style: italic; }

  .marks-cell { text-align: center; vertical-align: middle; }
  .marks { display: inline-block; min-width: 3rem; padding: 0.5rem 0.625rem; border-radius: 0.5rem; font-weight: 700; background: #f8fafc; border: 1px solid #e2e8f0; color: #0f172a; }
  .status-cell { text-align: center; vertical-align: middle; }
  .status-badge { display: inline-block; min-width: 5rem; padding: 0.375rem 0.75rem; border-radius: 999px; font-weight: 700; }
  .status-pass { background: #d1fae5; color: #065f46; border: 1px solid #a7f3d0; }
  .status-fail { background: #fee2e2; color: #991b1b; border: 1px solid #fecaca; }
  
  .row-correct { background: linear-gradient(to right, #ecfdf5, #f0fdf4); border-left: 0.25rem solid #10b981;
    &:hover { background: linear-gradient(to right, #d1fae5, #dcfce7); } }
  .row-incorrect { background: linear-gradient(to right, #fef2f2, #fff5f5); border-left: 0.25rem solid #ef4444;
    &:hover { background: linear-gradient(to right, #fee2e2, #fef5f5); } }
  
  .question-cell { font-weight: 500; color: #1e293b; line-height: 1.6; }
  .answer-cell { font-weight: 600; color: #059669; }
  .user-answer-cell { font-weight: 600; }
  .status-cell { text-align: center; }
  
  :host ::ng-deep .review-panel .mat-mdc-tab-header { background: #f8fafc; border-bottom: 2px solid #e2e8f0; padding: 0 16px; }
  :host ::ng-deep .review-panel .mat-mdc-tab-label { font-weight: 600; color: #64748b; transition: all 0.2s;
    &:hover { color: #3b82f6; } }
  :host ::ng-deep .review-panel .mat-mdc-tab-label-active { color: #3b82f6; }

  @media (max-width: 720px){
    .review-panel{ 
      width: 100%;
      max-height: 100vh;
      border-radius: 0;
    }
    
    .review-header {
      padding: 1rem 1.25rem;
      
      h3 {
        font-size: var(--font-size-lg);
      }
    }
    
    .review-list {
      padding: 1rem;
    }
    
    .attempt-meta {
      grid-template-columns: 1fr;
      padding: 1rem;
    }
    
    .col-question, .col-answer, .col-user-answer{ 
      display: block; 
      width: 100%;
    }
    
    .review-table th, .review-table td{ 
      padding: 0.625rem 0.75rem;
      font-size: var(--font-size-sm);
    }
  }

  /* --- Copied from admin exam-reports styles to match question review visuals --- */
  .questions-list { display:flex; flex-direction:column; gap:14px; margin-top:10px }
  .question-review-card { border: 1px solid var(--border-dark-1); border-radius:10px;  padding: 1rem 2rem 1rem 2rem; background: var(--theme-3); }
  .question-review-card .q-text { font-weight:300 }

  .q-head-row { display:flex; justify-content:space-between; align-items:flex-start; gap:.7rem; margin-bottom: 1rem }
  .q-left { display:flex; gap:.7rem; align-items:flex-start }
  .q-body { display: grid; gap: 0.5rem; }
  .q-meta { display:flex; gap:10px; align-items:center; }
  .q-index { width:2rem; height:2rem; background: #d7d8da91; border-radius:50%; display:flex; align-items:center; justify-content:center;  }
  .q-right { display:flex; gap:10px; align-items:center }
  .q-badge { background: var(--theme-3); border: 1px solid var(--border-dark-1); ;border-radius: .575rem; padding-top: .125rem;
      padding-bottom: .125rem; font-size: .75rem;    line-height: 1rem;   padding-left: .925rem;    padding-right: .925rem; width: fit-content;}
  .q-info { color: var(--button-1); font-size:0.95rem; display: contents;}
  .q-marks.small-muted { color: rgba(0,0,0,0.6); font-size:0.95rem }

  .q-options { display:flex; flex-wrap:wrap; gap:10px; }
  .q-options.two-col { display:grid; grid-template-columns: 1fr 1fr; gap:12px; }
  .q-option { display:flex; align-items:flex-start; gap:0.75rem; padding:0.75rem; border-radius:0.5rem; border:1px solid rgba(0,0,0,0.12); background:#f8fbff; }
  .opt-left { width:2.75rem; display:flex; align-items:center; justify-content:center }
  .opt-left .opt-mark { width:2.125rem; height:2.125rem; border-radius:50%; background:rgba(0,0,0,0.04); display:inline-flex; align-items:center; justify-content:center; font-weight:700 }
  .opt-body { flex:1 }
  .opt-badge { display:flex; align-items:center; gap:6px }
  .badge { padding:6px 8px; border-radius:8px; font-size:0.82rem; }
  .badge.your-answer { background: var(--red-bg) ; color:var(--red-text); border: 1px solid var(--bred-border); }
  .badge.correct { background:#e8f9ef; color:var(--green-text); border: 1px solid var(--bgreen-border); }
  .badge.missed { background: var(--blue-bg) ; color:var(--bblue-text); border: 1px solid var(--bblue-border); }
  .q-option.selected { background: var(--red-bg) ; color: var(--red-text); border-color: var(--bred-border); }
  .q-option.correct { background: var(--green-bg) ; color: var(--green-text); border-color: var(--bgreen-border); }
  .q-option.missed { background: var(--blue-bg) ; color: var(--bblue-text); border-color: var(--bblue-border); }

  .q-selected, .q-marks { margin-top:8px; font-size:0.95rem }
  .q-feedback { margin-top:8px; background: rgba(240,248,255,0.6); padding:8px 10px; border-radius:8px; color: rgba(0,0,0,0.75) }

  .q-option { padding:14px; }
  .opt-body { padding-right:12px ;     align-self: center;}
  .opt-badge { margin-left:auto; display:flex; align-items:center }

  .q-fill .fill-row { display:flex; gap:12px; align-items:center }
  .q-fill .fill-option { padding:10px 14px; border-radius:8px; background:#fff7ed; border:1px solid rgba(245,166,35,0.08); }
  .q-fill .fill-option.selected { background:#e8f6ff; border-color: rgba(2,112,255,0.12) }
  .q-fill .fill-option.correct { background: var(--green-bg); border-color: var(--bgreen-border) }
  .q-fill .fill-correct {padding:10px 14px; border-radius:8px;  color: rgba(0,0,0,0.6); font-size:0.9rem ; background-color: var(--green-bg);  border: 1px solid var(--bgreen-border) ; }

  .q-descriptive {     display: grid;gap: 1rem;  }
  .q-descriptive .desc-header { display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:10px; 
  padding: .7rem; background-color: var(--blue-bg); border-radius: .7rem; border: 1px solid var(--bblue-border) ; }
  .q-descriptive .desc-header .desc-question { flex:1 1 auto }
  .q-descriptive .desc-header .question-label { font-size:0.82rem; text-transform:uppercase; color:#8c6ad6; background: rgba(140,106,214,0.08); display:inline-block; padding:6px 8px; border-radius:8px; font-weight:700; margin-bottom:6px }
  .q-descriptive .desc-header .question-value { font-weight:700; color: rgba(0,0,0,0.85); }
  .q-descriptive .desc-header .desc-score { width:140px; flex:0 0 140px; display:flex; flex-direction:column; align-items:center; }
  .q-descriptive .desc-header .score-label{ font-size:0.85rem; color: rgba(0,0,0,0.55); }
  .q-descriptive .desc-header .score-value{ font-size:1.25rem; font-weight:800; color:#f39c12; background:#fff; padding:12px 8px; border-radius:10px; border:1px solid rgba(0,0,0,0.04); margin-top:6px }
  .q-descriptive .desc-model {padding: .7rem; background-color: var(--theme-2); border-radius: .7rem; border: 1px solid var(--bblue-border) ;}
  .q-descriptive .desc-student {padding: .7rem; background-color: var(--green-bg); border-radius: .7rem; border: 1px solid var(--bgreen-border) ;}
  .q-descriptive .desc-model .model-label, .q-descriptive .desc-student .student-label { font-weight:700; color: rgba(0,0,0,0.7); margin-bottom:6px }
  .q-descriptive .desc-model .model-text, .q-descriptive .desc-student .answer-text { color: rgba(0,0,0,0.85); line-height:1.45; }
  .q-descriptive .desc-score { width:140px; background:#ffffff; border:1px solid rgba(0,0,0,0.04); padding:10px; border-radius:8px; display:flex; flex-direction:column; align-items:center; justify-content:center }
  .q-descriptive .score-label{ font-weight:700; color: rgba(0,0,0,0.6); margin-bottom:6px }
  .q-descriptive .score-value{ font-size:1.05rem; font-weight:800; color:#0b66d0 }
  .q-descriptive .q-feedback { padding: .7rem; background-color: var(--blue-bg); border-radius: .7rem; border: 1px solid var(--bblue-border) ;}

  .q-review-comments { margin-top:10px }
  .review-columns { display:grid; grid-template-columns: 1fr 1fr 1fr; gap:12px }
  .review-columns .col { background: #fff; border:1px solid rgba(0,0,0,0.04); padding:10px; border-radius:8px; min-height:60px }
  .review-columns .col.missed { background-color: var(--red-bg); border-color: var(--bred-border); }
  .review-columns .col.incorrect { background-color: var(--orange-bg); border-color: var(--borange-border); }
  .review-columns .col.incomplete { background-color: var(--yellow-bg); border-color: var(--byellow-border); }

  .col-header { display:flex; align-items:center; gap:8px; margin-bottom:8px;     align-items: baseline; }
  .col-header h4 { margin:0; font-size:1rem; letter-spacing:0.3px }
  .dot { width:12px; height:12px; border-radius:50%; display:inline-block }
  .dot.red { background: var(--red-text) }
  .dot.orange { background: var(--orange-text) }
  .dot.yellow { background: var(--yellow-text) }
  .review-item { display:flex; gap:10px; align-items:flex-start }
  .ri-left { width:2.25rem; display:flex; align-items:flex-start; justify-content:flex-start }
  .ri-icon { width:1.75rem; height:1.75rem; display:inline-flex; align-items:center; justify-content:center; border-radius:0.375rem; font-size:0.875rem }
  .ri-icon.missed { color: var(--red-text);  }
  .ri-icon.incorrect { color: var(--orange-text);  }
  .ri-icon.incomplete {  color: var(--yellow-text); }
  .ri-body { flex:1 }
  .review-text.deleted { color: rgba(0,0,0,0.35); text-decoration: line-through }
  .deleted-by { color: #c0392b; font-style:italic; display:block; margin-top:6px }
  .review-actions { display:flex; gap:0.5rem;  margin-top:0.8rem ;padding-left: 1rem; }
  .review-actions mat-icon { font-size: initial !important; }
  .review-actions .edit-link, .review-actions .delete-link { padding:0.375rem 0.625rem; border-radius:0.5rem;  text-decoration:none }
  .review-actions .delete-link { color:#d33;  }
  .review-actions .edit-link:hover, .review-actions .delete-link:hover { opacity:0.95 }

  @media (max-width:880px){
    .review-columns { grid-template-columns: 1fr }
  }

  @media (max-width: 880px) {
    .q-descriptive .desc-row { flex-direction:column }
    .review-columns { grid-template-columns: 1fr }
    .q-descriptive .desc-score { width:100%; }
    .q-descriptive .desc-header { flex-direction:column; align-items:flex-start }
    .q-descriptive .desc-header .desc-score { width:100%; flex: none; margin-top:8px }
  }

  /* --- end copied styles --- */

